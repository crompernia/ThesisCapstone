{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/hr/employee-data/new/actions.js"],"sourcesContent":["/**\n * @fileoverview This file contains server actions for the new employee form.\n */\n'use server';\n\nimport { query } from '@/lib/db';\nimport { revalidatePath } from 'next/cache';\nimport { z } from 'zod';\n\nconst employeeSchema = z.object({\n  firstName: z.string().min(1),\n  lastName: z.string().min(1),\n  middleName: z.string().optional(),\n  gender: z.string().min(1),\n  dob: z.string().min(1),\n  position: z.string().min(1),\n  department: z.string().min(1),\n  branch: z.string().min(1),\n  hireDate: z.string().min(1),\n  email: z.string().email(),\n  phone: z.string().min(1),\n  sssNumber: z.string().optional(),\n  philhealthNumber: z.string().optional(),\n  pagibigNumber: z.string().optional(),\n  tin: z.string().optional(),\n});\n\nexport async function addEmployee(formData) {\n  const validatedFields = employeeSchema.safeParse({\n    firstName: formData.get('firstName'),\n    lastName: formData.get('lastName'),\n    middleName: formData.get('middleName'),\n    gender: formData.get('gender'),\n    dob: formData.get('dob'),\n    position: formData.get('position'),\n    department: formData.get('department'),\n    branch: formData.get('branch'),\n    hireDate: formData.get('hireDate'),\n    email: formData.get('email'),\n    phone: formData.get('phone'),\n    sssNumber: formData.get('sssNumber'),\n    philhealthNumber: formData.get('philhealthNumber'),\n    pagibigNumber: formData.get('pagibigNumber'),\n    tin: formData.get('tin'),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      success: false,\n      message: 'Invalid form data. Please check your entries.',\n    };\n  }\n\n  const {\n    firstName,\n    lastName,\n    middleName,\n    gender,\n    dob,\n    position,\n    department,\n    branch,\n    hireDate,\n    email,\n    sssNumber,\n    philhealthNumber,\n    pagibigNumber,\n    tin\n  } = validatedFields.data;\n\n  // Generate a unique ID for the new employee\n  const newId = `EMP-${String(Date.now()).slice(-5)}`;\n\n  try {\n    const insertQuery = `\n      INSERT INTO accounts (\n        id, first_name, last_name, middle_name, gender, date_of_birth, position,\n        department, branch, date_hired, email, role, status, sss_number, philhealth_number, pagibig_number, tin\n      )\n      VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, 'Employee', 'Pending Approval', $12, $13, $14, $15)\n    `;\n    await query(insertQuery, [\n      newId,\n      firstName,\n      lastName,\n      middleName,\n      gender,\n      dob,\n      position,\n      department,\n      branch,\n      hireDate,\n      email,\n      sssNumber,\n      philhealthNumber,\n      pagibigNumber,\n      tin\n    ]);\n\n    revalidatePath('/admin/approvals');\n    revalidatePath('/admin/dashboard');\n\n    return { success: true, message: 'Employee submitted for approval.' };\n  } catch (error) {\n    console.error('Database error adding new employee:', error);\n    // Check for unique constraint violation\n    if (error.code === '23505') {\n      return { success: false, message: 'An employee with this email already exists.' };\n    }\n    return { success: false, message: 'Failed to add new employee due to a database error.' };\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/hr/employee-data/new/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {addEmployee as '40c4a48c4327d347621b1b94973602cf1c4a7eec78'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/hr/employee-data/new/page.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/hr/employee-data/new/page.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/hr/employee-data/new/page.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAyS,GACtU,uEACA","debugId":null}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/hr/employee-data/new/page.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/hr/employee-data/new/page.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/hr/employee-data/new/page.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqR,GAClT,mDACA","debugId":null}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}